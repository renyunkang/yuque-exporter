
# è¯­é›€å¯¼å‡ºæ–‡æ¡£å·¥å…·
### åŠŸèƒ½ï¼š

- æ¨¡æ‹Ÿç”¨æˆ·æµè§ˆå™¨æ“ä½œä¸€ç¯‡ä¸€ç¯‡å¯¼å‡º markdown æ–‡æ¡£
- æ”¯æŒåŒåçš„æ–‡æ¡£å¯¼å‡º
- æ”¯æŒå¯¼å‡ºå¤±è´¥é‡è¯•

æˆ‘çš„çŸ¥è¯†åº“ä¸å¯¼å‡ºæ–‡ä»¶ç›®å½•å±•ç¤ºï¼š
![image.png](https://images.ryken.cloud/2023/05/91804cc3646d6356cd7458c9a12444fc.png)

![image.png](https://images.ryken.cloud/2023/05/4b3a4e4207ead71f15600806c12a5c1d.png)

åŠ¨å›¾å±•ç¤ºï¼š![image.png](./images/exporter.gif)

### è¯´æ˜ï¼š

è¿™æ˜¯ä¸€ä¸ªåŸºäºpuppeteer æ¥æ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨çš„æ“ä½œä¸€ç¯‡ä¸€ç¯‡çš„å¯¼å‡ºè¯­é›€æ–‡æ¡£çš„å·¥å…·ã€‚
å…³äºè¯­é›€çš„å¯¼å‡ºå¯ä»¥è¯¦æƒ…è¯´æ˜è§å®˜æ–¹çš„æ–‡æ¡£ï¼š[å¦‚ä½•å¯¼å…¥å¯¼å‡ºçŸ¥è¯†åº“](https://www.yuque.com/yuque/thyzgp/import-lake-to-lark) 

é¦–å…ˆè¯­é›€æ”¯æŒå¯¼å‡ºæ–‡æ¡£ä¸º markdown æ ¼å¼ã€‚
å•ç¯‡å¯¼å‡ºï¼šæ”¯æŒå¯¼å‡ºä¸º markdownã€wordã€pdfã€lakebookç­‰
æ‰¹é‡å¯¼å‡ºï¼šæ”¯æŒå¯¼å‡ºä¸º lakebookã€pdf æ ¼å¼ã€‚å¯¹äºè¶…çº§ç”¨æˆ·æ˜¯å¯ä»¥é€šè¿‡åˆ›å»º token æ¥ä½¿ç”¨[å®˜æ–¹çš„ exporter å·¥å…·](https://github.com/yuque/yuque-exporter)æˆ–è€…å…¶ä»–åŸºäº api çš„å·¥å…·è¿›è¡Œæ‰¹é‡å¯¼å‡ºï¼›è¶…çº§ç”¨æˆ·çš„ä»·æ ¼ä¸º 299/æœˆã€‚

lakebook æ ¼å¼ä¸ºè¯­é›€ç§æœ‰çš„æ ¼å¼ï¼š[lakebook æ ¼å¼è¯´æ˜](https://www.yuque.com/yuque/developer/lt69uo)ï¼Œè¯­é›€ä¹Ÿæ²¡æœ‰ç›¸åº”çš„å·¥å…·å»æ”¯æŒè¿ç§»/å¯¼å…¥åˆ°å…¶ä»–ç¬”è®°è½¯ä»¶ã€‚pdf ä¼°è®¡ä¹Ÿä¸èƒ½ç›´æ¥å¯¼å…¥å…¶ä»–ç¬”è®°è½¯ä»¶(è¿™ä¸ªæ²¡æœ‰ç ”ç©¶è¿‡å°±ä¸å±•å¼€äº†)ã€‚
å› æ­¤å¯¹äºæƒ³è¦è¿ç§»è‡ªå·±æ–‡æ¡£çš„æ™®é€šç”¨æˆ·ä»¥åŠä¼šå‘˜ç”¨æˆ·æ¥è¯´ï¼Œä½ åªèƒ½ä¸€ç¯‡ä¸€ç¯‡å¯¼å‡ºæ¥å®Œæˆä½ çš„è¿ç§»åŠ¨ä½œï¼Œè¿™äº›ç”¨æˆ·ä¹Ÿå¤§å¤šæœ‰ä¸Šç™¾ç¯‡æ–‡æ¡£ï¼Œè¿™æ— ç–‘æ˜¯åŠé€€ã€‚æ‰€ä»¥æˆ‘çš„è¿ç§»è®¡åˆ’ä¹Ÿä¸€å†æç½®ï¼ŒåŒæ—¶ä¹Ÿå†ç­‰å¾…å…¶ä»–çš„æ›´å‹å¥½çš„å¯¼å‡ºæ–¹å¼å‡ºç°ã€‚æœ€åè¿˜æ˜¯ä¸æƒ³ç­‰äº†ï¼Œè¯·æ•™ GPT å†™äº†è¿™ä¸ªå·¥å…·ï¼Œç¡®å®ä¹Ÿæ€•åƒæˆ‘è¿™ç§ç™½å«–ç”¨æˆ·ä¹‹åçš„è¿ç§»çš„æˆæœ¬è¶Šæ¥è¶Šå¤§äº†ã€‚

> ps: æœ¬äººä¹Ÿä¸æ˜¯ä¸“é—¨å†™ nodejs çš„ï¼Œä»£ç å¯èƒ½ä¹Ÿæ˜¯çƒ‚æˆç‹—å±ï¼Œè¯·å¤§å®¶ä¸å–œå‹¿å–·ã€‚è°¢è°¢ï¼

### ä½¿ç”¨ï¼š
> ç¡®ä¿ä½ çš„ç¯å¢ƒæœ‰ Chromium æµè§ˆå™¨ã€‚å¦‚ Google Chromeã€Microsoft Edgeã€Opera å’Œ Braveç­‰ï¼Œéƒ½æ˜¯åŸºäº Chromium æµè§ˆå™¨æ„å»ºçš„ã€‚

#### 1. è·å–ä¸ªäººæ–‡æ¡£è®¿é—®è·¯å¾„
è®¿é—®ä¸ªäººè´¦å·ç®¡ç†ï¼š https://www.yuque.com/settings/account

ä¸ªäººè·¯å¾„ï¼šè´¦å·è®¾ç½® -> è´¦å·ç®¡ç†å¯ä»¥æŸ¥çœ‹å·²ç»è®¾ç½®çš„ä¸ªäººè·¯å¾„ `https://www.yuque.com/xxx`

#### 2. å®‰è£… node ç›¸å…³çš„å·¥å…·
å»ºè®®ä½¿ç”¨ nvm ç®¡ç† nodeï¼Œé€‰å–ä¸‹åˆ—é€‚åˆè‡ªå·±çš„æ–¹å¼å®‰è£…ï¼š
- github åœ°å€ï¼š[nvm-sh/nvm: Node Version Manager](https://github.com/nvm-sh/nvm)
- gitee åœ°å€ï¼š[nvm-cn: ğŸ§Š nvmå›½å†…å®‰è£…å·¥å…· (gitee.com)](https://gitee.com/RubyKids/nvm-cn)

é…ç½® npm æ·˜å®æºï¼šnpm config set registry https://registry.npm.taobao.org

å®‰è£… yarnï¼šnpm install -g yarn --registry=https://registry.npm.taobao.org

#### 3. ä¸‹è½½ä»£ç å¹¶è¿è¡Œå·¥å…·
**ubuntu**
```bash
git clone https://github.com/renyunkang/yuque-exporter.git
cd yuque-exporter
npm install --registry=https://registry.npm.taobao.org
# å®‰è£… JSONStreamï¼šnpm install JSONStream --registry=https://registry.npm.taobao.org
yarn

# ç¬¬ä¸€æ¬¡æ˜¯éœ€è¦è´¦å·å¯†ç å»ç™»å½•çš„
ACCESSURL=xxx USER=xxx PASSWORD=xxx EXPORT_PATH=/path/to/exporter node main.js

# ç™»å½•ä¸€æ¬¡åä¼šä¿å­˜ cookieï¼Œä¹‹åä¼šä½¿ç”¨cookieç™»å½•
ACCESSURL=xxx EXPORT_PATH=/path/to/exporter node main.js
```

yarn å®‰è£…ä¾èµ–å¦‚æœä¸‹è½½æŠ¥é”™çš„è¯ï¼Œå¯ä»¥ä¾æ®æƒ…å†µæ›´æ¢æºã€‚

**windows**
```bash
git clone https://github.com/renyunkang/yuque-exporter.git
cd yuque-exporter
npm install --registry=https://registry.npm.taobao.org
# å®‰è£… JSONStreamï¼šnpm install JSONStream --registry=https://registry.npm.taobao.org
yarn

# cmd
set ACCESSURL="xxx"
set USER="xxx"
set PASSWORD="xxx"
set EXPORT_PATH=/path/to/exporter
node main.js

# powershell
$env:ACCESSURL="xxx";$env:USER="xxx";$env:PASSWORD="xxx";$env:EXPORT_PATH="/path/to/exporter"; node .\main.js
```

### å­˜åœ¨çš„é—®é¢˜ï¼š
1.æ— æ³•è·å–çŸ¥è¯†åº“çš„ç›®å½•ä¿¡æ¯ï¼Œè¿›ä¸€æ­¥åšå±‚çº§å…³ç³»çš„æ–‡æ¡£å¯¼å‡ºå­˜å‚¨
ç°åœ¨æ™®é€šç”¨æˆ·æ— æ³•è·å–çŸ¥è¯†åº“ä¸­çš„ç›®å½•ä¿¡æ¯ï¼Œå› æ­¤çŸ¥è¯†åº“æ–‡æ¡£çš„å¯¼å‡ºåå…¨éƒ¨å¹³é“ºä¿å­˜åˆ°ä»¥çŸ¥è¯†åº“åç§°å‘½åçš„æ–‡ä»¶å¤¹ä¸­ã€‚åŒåçš„æ–‡æ¡£ä¼šåœ¨æ–‡æ¡£åé¢è¿½åŠ æ•°å­—ä»¥åŒºåˆ†ï¼ŒçŸ¥è¯†åº“ç›®å½•çš„åˆ†çº§éœ€è¦è‡ªå·±æ ¹æ®æ–‡æ¡£çš„å†…å®¹è¿›è¡Œè°ƒæ•´ã€‚

è§£å†³åŠæ³•ï¼šè®¿é—®ç›®å½•çš„urlä¸º https://www.yuque.com/r/ä¸ªäººè·¯å¾„/çŸ¥è¯†åº“slug/tocï¼Œæœ‰å…´è¶£çš„å¯ä»¥æ ¹æ® html çš„å…ƒç´ çš„ç‰¹å¾æ¥åˆ†æã€‚ï¼ˆæˆ‘ä¸ªäººæ²¡æœ‰è¿™ä¸ªéœ€æ±‚ä¹Ÿå°±æ²¡æœ‰å¤ªå¤§å…³æ³¨äº†ï¼Œå¦‚æœä½ æœ‰å…´è¶£æˆ–è€…æœ‰éœ€æ±‚å¯ä»¥è¯•è¯•ï¼Œç±»ä¼¼è‡ªåŠ¨ç™»å½•æ—¶æŒ‰ç…§å…ƒç´ åŒ¹é…æ•°æ®ï¼‰

2.è‡ªåŠ¨ç™»å½•ä»…æ”¯æŒè´¦å·å¯†ç ç™»å½•

3.æ— æ³•ä¿è¯å…¼å®¹æ€§ï¼Œå¦‚æœä¹‹åå®˜æ–¹ api ä¿®æ”¹åï¼Œå¯ä»¥è‡ªå·±æ ¹æ® api ä¿®æ”¹æºç 

### Q&A
1.  Could not find Chromium ä½†æ˜¯æœ‰ chorm æµè§ˆå™¨
åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šï¼ŒPuppeteer é»˜è®¤è°ƒç”¨çš„ Chrome è·¯å¾„å¦‚ä¸‹ï¼š
-   Windows:Â C:\Program Files (x86)\Google\Chrome\Application\chrome.exe
-   macOS:Â /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
-   Linux:Â /usr/bin/google-chrome
å¦‚æœä¸»æœºä¸Šå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸é»˜è®¤ä¸€è‡´ä½†ä»ç„¶è¿è¡Œå¤±è´¥ï¼Œå¯ä»¥ä¿®æ”¹æºç æ‰‹åŠ¨æŒ‡å®šä¸€ä¸‹
![image.png](https://images.ryken.cloud/2023/05/eb093fe57cb0b6cc557a9616f5899445.png)
```js
const browser = await puppeteer.launch({ headless: true });
 to
const browser = await puppeteer.launch({ headless: true, executablePath: '/usr/bin/google-chrome' });
```

